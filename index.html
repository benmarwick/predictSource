<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="A package to analyze data used to determine whether samples from multiple sources
    can be separated, to predict the sources of samples from unknown
    sources, and to evaluation the validity of those predictions. Sample data can include both
    quantitative and qualitative data. The package includes functions for creating an analysis file
    from multiple files and exploratory data analysis, as well as multivariate statistical methods to
    determine source separation, predict sources of unknown samples, and evaluate the validity of the
    predictions (principal components, classification trees, and random forests).">
<title>Compositional Data Analysis of Archaeological Artefacts â€¢ predictSource</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Compositional Data Analysis of Archaeological Artefacts">
<meta property="og:description" content="A package to analyze data used to determine whether samples from multiple sources
    can be separated, to predict the sources of samples from unknown
    sources, and to evaluation the validity of those predictions. Sample data can include both
    quantitative and qualitative data. The package includes functions for creating an analysis file
    from multiple files and exploratory data analysis, as well as multivariate statistical methods to
    determine source separation, predict sources of unknown samples, and evaluate the validity of the
    predictions (principal components, classification trees, and random forests).">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">predictSource</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/Introduction.html">Introduction to the predictSource package</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="predictsource">predictSource<a class="anchor" aria-label="anchor" href="#predictsource"></a>
</h1></div>
<p>The package predictSource provides functions to verify that data can be used to separate sources of samples, to predict the sources of additional samples, and to create plots that evaluate the validity of the predictions. Data can be both quantitative and qualitative. A proposed analysis strategy is to use random forests to evaluate whether the data can separate the sources and to identify the most important predictors if there are many, use a classification tree to understand how the data are used to separate sources, use random forests to predict the sources of unknown samples, and then evaluate the validity of the predictions by ploting the first two principal components of the unknowns with the convex hulls of the known sources. The random forest analysis also produces the probabilities of assignment to each source for each sample; this can be helpful in identifying unknowns that are difficult to classify.The package also contains functions for exploratory data analysis (descriptive statistics, 2- and 3-dimensional plots [the latter can be rotated], tests for 1- and 2-dimensional Gaussian distributions [helpful in identifying outliers]) and multivariate analysis (principal components). A detailed vignette provides examples for the use of each function (using obsidian data in the examples) and some background for classification trees, random forests, and checking for Gaussian distributions.</p>
<p>The motivation for the package was predicting the sources of obsidian artifacts. Archaeologists and geochemists usually do this using 2- and 3-dimensional scatterplots. The functions in this package make predictions much faster than can be done with scatterplots; the principal components graphic identifies objects that are or may be misclassified. Archaeological knowledge should also be used in making predictions.</p>
<p>The figure below shows principal components plots using data sets with the composition of five elements from five obsidian sources and the predicted sources of 91 artifacts, with predictions made from scatterplots (see the vignette for information about these data sets). The left-hand plot shows the convex hulls of the first two principal components from the source data. The second plot shows the locations of artifacts that are outside of their respective predicted source convex hulls. That plot clearly identifies one misclassified artifact (predicted to be from source D but inside the convex hull for source C); the remaining artifacts appear to be correctly classified. For these data, the random forests predictions appear to be correct for all of the artifacts.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://benmarwick.github.io/predictSource/">predictSource</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ObsidianSources</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ObsidianArtifacts</span><span class="op">)</span></span>
<span><span class="va">analyticVars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Rb"</span>, <span class="st">"Sr"</span>, <span class="st">"Y"</span>, <span class="st">"Zr"</span>, <span class="st">"Nb"</span><span class="op">)</span></span>
<span><span class="va">sources</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">ObsidianSources</span><span class="op">[</span>, <span class="st">"Code"</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">pcaEval</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="reference/ps_pcaEvaluation.html">ps_pcaEvaluation</a></span><span class="op">(</span></span>
<span>    SourceData <span class="op">=</span> <span class="va">ObsidianSources</span>,</span>
<span>    unknownData <span class="op">=</span> <span class="va">ObsidianArtifacts</span>,</span>
<span>    SourceGroup <span class="op">=</span> <span class="st">"Code"</span>,</span>
<span>    unknownGroup <span class="op">=</span> <span class="st">"Code"</span>,</span>
<span>    known_sources <span class="op">=</span> <span class="va">sources</span>,</span>
<span>    predicted_sources <span class="op">=</span> <span class="va">sources</span>,</span>
<span>    AnalyticVars <span class="op">=</span> <span class="va">analyticVars</span>,</span>
<span>    ID <span class="op">=</span> <span class="st">"ID"</span>,</span>
<span>    plotAllPoints <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    plotHullsOutsidePoints <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    plotOutsidePoints <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="reference/figures/README-unnamed-chunk-1-1.png" alt="Principal components plot with Jemez obsidian source convex hulls and obsidian artifacts with points outside the convex hull labeled with source predictions based on scatterplots." width="100%"><p class="caption">
Principal components plot with Jemez obsidian source convex hulls and obsidian artifacts with points outside the convex hull labeled with source predictions based on scatterplots.
</p>
</div>
<p>The figure below is from a random forests analysis of the artifacts. The figure contains box plots of the source assignment probabilities for each artifact, excluding the probabilities of assignment to the predicted source. This plot identifies the artifacts for which assignment is most difficult. Source C is potentially of most concern. The user can create a data frame with information on artifacts that may be most likely to be misclassified. See the vignette for more details.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://benmarwick.github.io/predictSource/">predictSource</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ObsidianSources</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ObsidianArtifacts</span><span class="op">)</span></span>
<span><span class="va">analyticVars</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Rb"</span>, <span class="st">"Sr"</span>, <span class="st">"Y"</span>, <span class="st">"Zr"</span>, <span class="st">"Nb"</span><span class="op">)</span></span>
<span><span class="va">saveRandomForest</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="reference/ps_randomForest.html">ps_randomForest</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">ObsidianSources</span>,</span>
<span>    GroupVar <span class="op">=</span> <span class="st">"Code"</span>,</span>
<span>    Groups <span class="op">=</span> <span class="st">"All"</span>,</span>
<span>    AnalyticVars <span class="op">=</span> <span class="va">analyticVars</span>,</span>
<span>    NvarUsed <span class="op">=</span> <span class="fl">3</span>,</span>
<span>    plotErrorRate <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    plotImportance <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    predictSources <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    predictData <span class="op">=</span> <span class="va">ObsidianArtifacts</span>,</span>
<span>    plotSourceProbs <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; Warning in (function (z, notch = FALSE, width = NULL, varwidth = FALSE, : some</span></span>
<span><span class="co">#&gt; notches went outside hinges ('box'): maybe set notch=FALSE</span></span>
<span><span class="co">#&gt; Warning in (function (z, notch = FALSE, width = NULL, varwidth = FALSE, : some</span></span>
<span><span class="co">#&gt; notches went outside hinges ('box'): maybe set notch=FALSE</span></span></code></pre></div>
<div class="figure">
<img src="reference/figures/README-unnamed-chunk-2-1.png" alt="Figure 7.3b: Box plots of the estimated probabilities of sources other than the predicted sources for the obsidian artifacts." width="100%"><p class="caption">
Figure 7.3b: Box plots of the estimated probabilities of sources other than the predicted sources for the obsidian artifacts.
</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install predictSource from GitHub with:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"benmarwick/predictSource"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing predictSource</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Ben Marwick <br><small class="roles"> Author, maintainer </small>  </li>
<li>John Karon <br><small class="roles"> Author </small>  </li>
<li>Steven Shakley <br><small class="roles"> Author </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Ben Marwick, John Karon, Steven Shakley.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
