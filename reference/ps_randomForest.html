<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Implements a random forest analysis of source data, and predicts sources of unknowns if requested"><title>ps_randomForest — ps_randomForest • predictSource</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ps_randomForest — ps_randomForest"><meta property="og:description" content="Implements a random forest analysis of source data, and predicts sources of unknowns if requested"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">predictSource</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/Introduction.html">Introduction to the predictSource package</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>ps_randomForest</h1>
      
      <div class="d-none name"><code>ps_randomForest.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Implements a random forest analysis of source data, and predicts sources of unknowns if requested</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ps_randomForest</span><span class="op">(</span></span>
<span>  doc <span class="op">=</span> <span class="st">"ps_randomForest"</span>,</span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">GroupVar</span>,</span>
<span>  Groups <span class="op">=</span> <span class="st">"All"</span>,</span>
<span>  <span class="va">AnalyticVars</span>,</span>
<span>  sourceID <span class="op">=</span> <span class="st">" "</span>,</span>
<span>  Ntrees <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  NvarUsed <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  Seed <span class="op">=</span> <span class="fl">11111</span>,</span>
<span>  digitsImportance <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  plotErrorRate <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  plotImportance <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  predictSources <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  predictData <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  unknownID <span class="op">=</span> <span class="st">" "</span>,</span>
<span>  plotSourceProbs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  folder <span class="op">=</span> <span class="st">" "</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>doc</dt>
<dd><p>Documentation for the function use added to model usage, default value is the function name</p></dd>


<dt>data</dt>
<dd><p>A data frame with the data used to grow trees (source data if predictions are made)</p></dd>


<dt>GroupVar</dt>
<dd><p>The name of variable defining groups, grouping is required</p></dd>


<dt>Groups</dt>
<dd><p>A vector of codes for groups to be used, 'All' if use all groups</p></dd>


<dt>AnalyticVars</dt>
<dd><p>A vector with names (character-valued) of the analytic variables</p></dd>


<dt>sourceID</dt>
<dd><p>If not " " (the default), the name of the variable with sample ID for source data</p></dd>


<dt>Ntrees</dt>
<dd><p>The number of trees grown, default value of 500 is that for the randomForest function</p></dd>


<dt>NvarUsed</dt>
<dd><p>If not NA (the default), the number of variables to use in each random forest call
to rpart; if NA, rpart uses the default value for randomForest()
 (the square root of the number of candidate variables)</p></dd>


<dt>Seed</dt>
<dd><p>If not NA, a random number generator seed to produce reproducible results;
default value is 11111</p></dd>


<dt>digitsImportance</dt>
<dd><p>The number of significant digits for the importance measure, default is 1</p></dd>


<dt>plotErrorRate</dt>
<dd><p>Logical, whether to show the error rate plot, default is TRUE</p></dd>


<dt>plotImportance</dt>
<dd><p>Logical, whether to show the plot of variable importance, default is TRUE</p></dd>


<dt>predictSources</dt>
<dd><p>Logical; if T, predict sources for the data in predictData; default is FALSE</p></dd>


<dt>predictData</dt>
<dd><p>A data frame or matrix with data used to predict sources for observations,
must contain all variables in AnalyticVars_</p></dd>


<dt>unknownID</dt>
<dd><p>if not " " (the default), the name of the variable with the sample ID for
artifact data</p></dd>


<dt>plotSourceProbs</dt>
<dd><p>Logical, if TRUE (the default) and predictSources=TRUE, show box plots of source
probabilities</p></dd>


<dt>folder</dt>
<dd><p>The path to the folder in which data frames will be saved; default is " "</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>The function returns a list with the following components:</p>


<ul><li><p>usage: A string with the contents of the argument doc, the date run, the version of R used</p></li>
<li><p>dataUsed: The contents of the argument data restricted to the groups used</p></li>
<li><p>sourcesNA:  A data frame with data from the data frame data with missing values,
   NÁ if no missing values</p></li>
<li><p>analyticVars: A vector with the value of the argument AnalyticVars</p></li>
<li><p>params: A list with the values of the grouping, logical, and numeric arguments</p></li>
<li><p>formulaRf:  The formula used in the analysis (the variables specified in the argument AnalyticVars
                       separated by + signs)</p></li>
<li><p>forest:  A summary of the random forest call, estimated error rate, and
  confusion matrix</p></li>
<li><p>importance:  A data frame with information on the importance of each variable
   in AnalyticVars</p></li>
<li><p>confusion:  A data frame with the estimate of the confusion matrix</p></li>
<li><p>predictedData:   A data frame with the artifact data used for predictions; if there
  is missing data, after imputation of the missing data</p></li>
<li><p>predictedNA: A data frame with the observations for which missing data were imputed;
  NA if there are no missing data</p></li>
<li><p>predictedSources:  A data frame with prediction information, sample ID (if requested),
     and values of AnalyticVars</p></li>
<li><p>predictedTotals:  A vector with the predicted totals for each group (source)</p></li>
<li><p>impError: The estimated OOB (out of bag) error for imputed predictor data;
  NA if no imputed data</p></li>
<li><p>location: The value of the parameter folder</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The function implements a random forest analysis using the R function randomForest().
If predictSources and plotSourceProbs are TRUE, the function creates two box plots.
  The first plot shows, for each source,  the set of probabilities of assignment to that source
   for the observations assigned to that source (all of these probabilities should be large).
   The second plot shows, for each source, the set of probabilities of assignment to that source
    for the observations not assigned to that source (for each source,
    there is one such probability for observation); these probabilities should be relatively small,
    and some should be zero.  See the vignette for more details and examples of these plots.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ObsidianSources</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">analyticVars</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Rb"</span>,<span class="st">"Sr"</span>,<span class="st">"Y"</span>,<span class="st">"Zr"</span>,<span class="st">"Nb"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">save_randomForest</span> <span class="op">&lt;-</span> <span class="fu">ps_randomForest</span><span class="op">(</span>data<span class="op">=</span><span class="va">ObsidianSources</span>, GroupVar<span class="op">=</span><span class="st">"Code"</span>,Groups<span class="op">=</span><span class="st">"All"</span>,</span></span>
<span class="r-in"><span>  sourceID<span class="op">=</span><span class="st">"ID"</span>, AnalyticVars<span class="op">=</span><span class="va">analyticVars</span>, NvarUsed<span class="op">=</span><span class="fl">3</span>, plotSourceProbs<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ps_randomForest-1.png" alt="" width="700" height="433"></span>
<span class="r-plt img"><img src="ps_randomForest-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="co">#</span></span></span>
<span class="r-in"><span><span class="co"># predicted sources for artifacts</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ObsidianSources</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">ObsidianArtifacts</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">analyticVars</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Rb"</span>,<span class="st">"Sr"</span>,<span class="st">"Y"</span>,<span class="st">"Zr"</span>,<span class="st">"Nb"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">save_randomForest</span> <span class="op">&lt;-</span> <span class="fu">ps_randomForest</span><span class="op">(</span>data<span class="op">=</span><span class="va">ObsidianSources</span>, GroupVar<span class="op">=</span><span class="st">"Code"</span>,Groups<span class="op">=</span><span class="st">"All"</span>,</span></span>
<span class="r-in"><span>AnalyticVars<span class="op">=</span><span class="va">analyticVars</span>, sourceID<span class="op">=</span><span class="st">"ID"</span>, NvarUsed<span class="op">=</span><span class="fl">3</span>, plotErrorRate<span class="op">=</span><span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>plotImportance<span class="op">=</span><span class="cn">FALSE</span>, predictSources<span class="op">=</span><span class="cn">TRUE</span>, predictData<span class="op">=</span><span class="va">ObsidianArtifacts</span>, unknownID<span class="op">=</span><span class="st">"ID"</span>,</span></span>
<span class="r-in"><span> plotSourceProbs<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>some notches went outside hinges ('box'): maybe set notch=FALSE</span>
<span class="r-plt img"><img src="ps_randomForest-3.png" alt="" width="700" height="433"></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>some notches went outside hinges ('box'): maybe set notch=FALSE</span>
<span class="r-plt img"><img src="ps_randomForest-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Ben Marwick, John Karon, Steven Shakley.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

